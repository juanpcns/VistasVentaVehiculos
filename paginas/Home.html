<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Venta de Vehículos</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
        body, html {
            height: 100%;
            margin: 0;
            background: #f3f5f8;
            color: #222;
            font-family: 'Poppins', sans-serif;
        }

        .sidebar {
            height: 100vh;
            position: fixed;
            left: 0;
            top: 0;
            width: 250px;
            background: #222e34;
            color: #bfcad9;
            z-index: 10;
            display: flex;
            flex-direction: column;
        }

        .sidebar-header {
            padding: 24px 24px 8px 24px;
            font-size: 2rem;
            color: #fff;
            font-weight: 700;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .sidebar-menu {
            flex: 1;
            padding: 12px 0;
        }

            .sidebar-menu a {
                display: flex;
                align-items: center;
                padding: 14px 30px;
                color: #bfcad9;
                text-decoration: none;
                font-size: 1.15rem;
                border-left: 3px solid transparent;
                transition: background 0.15s, color 0.15s;
                gap: 12px;
            }

                .sidebar-menu a.active, .sidebar-menu a:hover {
                    background: #192127;
                    color: #fff;
                    border-left: 3px solid #39a7f3;
                }

                .sidebar-menu a i {
                    width: 22px;
                    text-align: center;
                }

        .sidebar-footer {
            padding: 18px 24px;
            color: #bfcad9;
            font-size: 1rem;
            border-top: 1px solid #2d3a43;
        }

        .main-wrapper {
            margin-left: 250px;
            min-height: 100vh;
            background: #f3f5f8;
        }

        .appbar {
            height: 62px;
            background: #202a2f;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 32px 0 32px;
            color: #fff;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
        }

        .appbar-title {
            font-size: 1.55rem;
            font-weight: 600;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .usuario-nombre {
            font-size: 1.17rem;
            font-weight: 500;
            margin-right: 18px;
        }

        .btn-salir {
            background: #e04a59;
            color: #fff;
            font-weight: 600;
            border: none;
            border-radius: 7px;
            padding: 5px 16px 5px 12px;
            transition: background 0.2s;
        }

            .btn-salir:hover {
                background: #c73948;
            }

        .main-content {
            padding: 2.5rem 2rem 2rem 2rem;
            background: #f3f5f8;
            min-height: calc(100vh - 62px);
        }

        @media (max-width: 991px) {
            .sidebar {
                min-width: 100px;
                width: 100px;
            }

            .main-wrapper {
                margin-left: 100px;
            }
        }

        @media (max-width: 700px) {
            .sidebar {
                position: relative;
                min-width: 100vw;
                width: 100vw;
                height: auto;
            }

            .main-wrapper {
                margin-left: 0;
            }

            .appbar {
                padding-left: 12px;
                padding-right: 12px;
            }
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="sidebar-header">
            <i class="fa-solid fa-car"></i> Venta de Vehículos
        </div>
        <div class="sidebar-menu">
            <a href="#" class="active" id="menu-inicio" onclick="cargarVista('inicio', this)">
                <i class="fa-solid fa-house"></i> Inicio
            </a>
            <a href="#" id="menu-vehiculos" onclick="cargarVista('vehiculos', this)">
                <i class="fa-solid fa-car-side"></i> Vehículos
            </a>
            <a href="#" id="menu-ventas" onclick="cargarVista('pedidos', this)">
                <i class="fa-solid fa-calendar-check"></i> Ventas
            </a>
            <a href="#" id="menu-aprobar-pedidos" onclick="cargarVista('aprobar_pedidos', this)">
                <i class="fa-solid fa-check"></i> Aprobar Pedidos
            </a>
            <a href="#" id="menu-taller" onclick="cargarVista('taller', this)">
                <i class="fa-solid fa-wrench"></i> Taller
            </a>
            <a href="#" id="menu-usuarios" onclick="cargarVista('usuarios', this)">
                <i class="fa-solid fa-users"></i> Usuarios
            </a>
            <a href="#" id="menu-reportes" onclick="cargarVista('reportes', this)">
                <i class="fa-solid fa-chart-bar"></i> Reportes
            </a>
        </div>
        <div class="sidebar-footer text-center small">
            © 2024 TuEmpresa
        </div>
    </div>
    <!-- Main Wrapper -->
    <div class="main-wrapper">
        <!-- Appbar -->
        <div class="appbar">
            <span class="appbar-title"><i class="fa-solid fa-car-side"></i> Venta de Vehículos</span>
            <div>
                <span class="usuario-nombre">Usuario</span>
                <button class="btn btn-salir"><i class="fa-solid fa-right-from-bracket me-1"></i>Salir</button>
            </div>
        </div>
        <!-- Contenido dinámico -->
        <div class="main-content" id="contenido">
            <h2 class="mt-4 mb-3 fw-bold">Bienvenido al sistema de Venta de Vehículos</h2>
            <p class="lead mb-4">Selecciona una opción en el menú.</p>
        </div>
    </div>
    <script>
        // Cambia clase activa del menú
        function setActiveMenu(link) {
            document.querySelectorAll('.sidebar-menu a').forEach(a => a.classList.remove('active'));
            link.classList.add('active');
        }

        // Carga la vista según el menú
        function cargarVista(vista, link) {
            setActiveMenu(link);

            if (vista === 'inicio') {
                document.getElementById('contenido').innerHTML = `
                            <h2 class="mt-4 mb-3 fw-bold">Bienvenido al sistema de Venta de Vehículos</h2>
                            <p class="lead mb-4">Selecciona una opción en el menú.</p>
                        `;
            } else if (vista === 'vehiculos') {
                fetch('vehiculos.html')
                    .then(r => r.text())
                    .then(html => {
                        document.getElementById('contenido').innerHTML = html;
                        let oldScript = document.getElementById('vehiculos-script');
                        if (oldScript) oldScript.remove();
                        var script = document.createElement('script');
                        script.src = 'Scripts/Vehiculos.js';
                        script.id = 'vehiculos-script';
                        script.onload = function () {
                            console.log('Vehiculos.js cargado y ejecutado');
                        };
                        document.body.appendChild(script);
                    });
            } else if (vista === 'pedidos') {
                fetch('pedidos.html')
                    .then(r => r.text())
                    .then(html => {
                        document.getElementById('contenido').innerHTML = html;
                        let oldScript = document.getElementById('pedidos-script');
                        if (oldScript) oldScript.remove();
                        var script = document.createElement('script');
                        script.src = 'Scripts/Pedidos.js';
                        script.id = 'pedidos-script';
                        script.onload = function () {
                            console.log('Pedidos.js cargado y ejecutado');
                            setTimeout(function () {
                                if (window.cargarVehiculos) {
                                    window.cargarVehiculos();
                                } else if (window.PedidosApp && window.PedidosApp.cargarVehiculos) {
                                    window.PedidosApp.cargarVehiculos();
                                }
                            }, 100);
                        };
                        document.body.appendChild(script);
                    });
            } else if (vista === 'aprobar_pedidos') {
                fetch('pedidos_aprobar.html')
                    .then(r => r.text())
                    .then(html => {
                        document.getElementById('contenido').innerHTML = html;
                        let oldScript = document.getElementById('pedidos-aprobar-script');
                        if (oldScript) oldScript.remove();
                        var script = document.createElement('script');
                        script.src = 'Scripts/pedidos_aprobar.js'; // ← AQUÍ el nombre real
                        script.id = 'pedidos-aprobar-script';
                        script.onload = function () {
                            console.log('pedidos_aprobar.js cargado y ejecutado');
                            // <---- SOLUCIÓN AQUÍ ---->
                            if (window.PedidosAprobarApp && typeof window.PedidosAprobarApp.cargarPedidosPendientes === 'function') {
                                window.PedidosAprobarApp.cargarPedidosPendientes();
                            }
                        };
                        document.body.appendChild(script);
                    });
            } else {
                document.getElementById('contenido').innerHTML = `
                            <div class="alert alert-secondary">Módulo en construcción (${vista})</div>
                        `;
            }
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
